/*! For license information please see 2026.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[2026],{52026:(e,n,t)=>{t.d(n,{GI:()=>l,I9:()=>d,IV:()=>p,Y7:()=>m,du:()=>f,vM:()=>a});var r=t(68909),o=t(78229),i=t(96659),u=t(65882),c=t(40397),s=t(86866);const a={count:0};const p=e=>{const{additionalFilter:n,sweepData:t,direction:r,sourceSweep:u,ignoreSweeps:c,directionFactor:s,considerTrims:a,meshQuery:p}=e;if(!t.currentSweepObject)return[];const l=u||t.currentSweepObject;let d=o.xg(l);a&&p&&!l.neighborsEdited&&(d=h(l,p));const f=[o.AU(l),o.Ol(),d,o.jW(l.position,r,s)];for(const e of c||[])f.push(o.AU(e));const m=[i.oW(l.position,r),i.Io(l.position)];return n&&f.push(n),t.sortByScore(f,m)},l=e=>{const{sweepData:n,direction:t,viewDirection:r,sourceSweep:c,ignoreSweeps:s=[],directionFactor:p,additionalFilter:l,meshQuery:d,scorers:f=[],filters:m=[]}=e;if(!n.currentSweepObject)return[];const b=t.clone().normalize(),O=r?r.clone().normalize():void 0,h=c||n.currentSweepObject;m.push(o.AU(h),o.Ol(),o.fm(h.position,u.U.maxDistSameFloor*u.U.maxDistSameFloor),o.Zx());for(const e of s)m.push(o.AU(e));return d&&!h.neighborsEdited||m.push(o.xg(h)),O?m.push(v(h,b,O,null!=p?p:u.U.directionFactor,u.U.viewDirectionFactor)):m.push(o.jW(h.position,b,p)),l&&m.push(l),d&&!h.neighborsEdited&&m.push(o.Zz.negate(j(h,d))),O&&f.push(i.VY(h.position,O,u.U.viewDirectionWeight)),f.push(i.oW(h.position,b,u.U.directionWeight),i.Io(h.position),g(h),y(h.sourceViewId)),a.count=0,n.sortByScore(m,f)},d=(e,n,t,r,c=[],s=[])=>{const p=s.slice(),l=c.slice();p.push(o.Ol(),o.Zx()),l.push(i.Io(t.point));const d=e.currentSweepObject;n&&d?(p.push(o.AU(d),o.lp(d.position,u.U.longerTransitionMaxDist),o.xg(d)),l.push(b(e),y(d.sourceViewId))):p.push(o.lp(t.point,u.U.longerTransitionMaxDist)),t.face&&p.push(o.DJ(t.point,t.face.normal));const f=null==r?void 0:r.floorIdFromObject(t.object);f&&p.push(o.Eo(f));const m=null==r?void 0:r.mdsRoomIdFromObject(t.object);m&&p.push(O(m)),a.count=0;const v=e.sortByScore(p,l);if(0===v.length){const n=e.getClosestSweep(t.point,!0,(e=>s.every((n=>n(e)))));v.push({sweep:n,score:0})}return v},f=e=>{const{sweepData:n,inside:t=!1,point:o,meshQuery:i,callerScorers:u=[],callerFilters:c=[]}=e,s={distance:0,point:(new r.Vector3).copy(o),object:{raycast:(e,n)=>{},renderOrder:0}};return d(n,t,s,i,u,c)},m=(e,n,t)=>{const r=(0,c.kf)(e,n);return t&&r.multiply(t),(0,s.V5)(r)},b=e=>{function n(n){return e.containsSweep(n.id)?5:-5}return Object.defineProperty(n,"name",{value:"_preferUnfiltered"}),n},y=e=>{function n(n){return e===n.sourceViewId?1:-1}return Object.defineProperty(n,"name",{value:"_bySameView"}),n},O=e=>{function n(n){return e===n.roomId}return Object.defineProperty(n,"name",{value:"_bySameRoom"}),n},v=(e,n,t,r,i)=>{const u=o.jW(e.position,n,r);Object.defineProperty(u,"name",{value:"_filterByDir"});const c=o.Zz.some(o.Zz.every(u,o.lp(e.position,5)),o.jW(e.position,t,i));Object.defineProperty(c,"name",{value:"_filterByDirOrViewDir"});return n.dot(t)<.25?u:c},j=(e,n)=>{function t(t){return a.count++,n.isSegmentOccluded(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_notRaycastNeighbors"}),t},h=(e,n)=>{const t=o.Zz.some(o.xg(e),o.Zz.every(o.Zz.negate(o.xg(e)),o.Zx(),o.Ol(),o.fm(e.position,u.U.maxDistSameFloor*u.U.maxDistSameFloor),((e,n)=>{function t(t){return n.isSegmentTrimmed(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_intersectsTrim"}),t})(e,n),o.Zz.negate(j(e,n))));return Object.defineProperty(t,"name",{value:"_filterByNeighborOrTrim"}),t},g=e=>{function n(n){return o.xg(e)(n)?1:-1}return Object.defineProperty(n,"name",{value:"_visionNeighbors"}),n}},78229:(e,n,t)=>{t.d(n,{AU:()=>u,DJ:()=>y,Eo:()=>f,GS:()=>a,OX:()=>l,Ol:()=>b,Pi:()=>O,Zx:()=>p,Zz:()=>h,f:()=>s,fm:()=>j,jW:()=>m,lp:()=>v,sT:()=>d,xg:()=>c});var r=t(50018),o=t(68909);const i=.25,u=e=>{function n(n){return n!==e}return Object.defineProperty(n,"name",{value:"_not"}),n},c=e=>{function n(n){return!!e.neighbours&&(-1!==e.neighbours.indexOf(n.id)||-1!==e.neighbours.indexOf(n.platformId))}return Object.defineProperty(n,"name",{value:"_neighbor"}),n},s=e=>{function n(n){return e===n||c(e)(n)}return Object.defineProperty(n,"name",{value:"_neighborOrSelf"}),n};function a(e){return e&&e.placementType===r.EO.MANUAL}function p(){function e(e){return e&&e.alignmentType===r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_aligned"}),e}const l=()=>{function e(e){return e&&e.alignmentType!==r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_unaligned"}),e},d=e=>{function n(n){return n&&e.floorId===n.floorId}return Object.defineProperty(n,"name",{value:"_sameFloor"}),n},f=e=>{function n(n){return n&&e===n.floorId}return Object.defineProperty(n,"name",{value:"_onFloor"}),n},m=(()=>{const e=new o.Vector3,n=new o.Vector3;return(t,r,o=i)=>{function u(i){return e.copy(i.position).sub(t).normalize().dot(n.copy(r))>o}return Object.defineProperty(u,"name",{value:"_inDirection"}),u}})(),b=()=>{function e(e){return e&&e.enabled}return Object.defineProperty(e,"name",{value:"_enabled"}),e},y=(e,n)=>{const t=new o.Vector3;function r(r){return t.copy(r.position).sub(e).normalize().dot(n)>0}return n=n.clone(),Object.defineProperty(r,"name",{value:"_byNormal"}),r},O=(e,n)=>{function t(t){return e.distanceTo(t.position)>n}return Object.defineProperty(t,"name",{value:"_outsideMaxDist"}),t},v=(e,n)=>{function t(t){return e.distanceTo(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxDist"}),t},j=(e,n)=>{function t(t){return e.distanceToSquared(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxSqDist"}),t},h={negate:e=>function(n){return!e.call(e,n)},every:(...e)=>function(n){return e.every((e=>e(n)))},some:(...e)=>function(n){return e.some((e=>e(n)))}}},96659:(e,n,t)=>{t.d(n,{Io:()=>c,VY:()=>a,cv:()=>p,d$:()=>u,oW:()=>s});var r=t(68909);const o=-1,i=10,u=(e,n=o)=>{function t(t){return e.distanceToSquared(t.position)*n}return Object.defineProperty(t,"name",{value:"_distanceSq"}),t},c=(e,n=o)=>{function t(t){return e.distanceTo(t.position)*n}return Object.defineProperty(t,"name",{value:"_distance"}),t},s=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_direction"}),u},a=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_viewDirNorm"}),u},p=(e,n=o)=>{function t(t){return e.distanceToSquared(t.floorPosition)*n}return Object.defineProperty(t,"name",{value:"_floorDistSq"}),t}}}]);