/*! For license information please see 235.js.LICENSE.txt */
(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[235],{93327:(e,i,n)=>{var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetHighlightReel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activeHighlightReel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HighlightReelDetails"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetHighlightReelForView"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"viewId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},defaultValue:{kind:"NullValue"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"viewType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"viewId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeHighlightReel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HighlightReelDetails"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetHighlightReelSweeps"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"views"},arguments:[{kind:"Argument",name:{kind:"Name",value:"types"},value:{kind:"ListValue",values:[{kind:"StringValue",value:"matterport.model.default",block:!1},{kind:"StringValue",value:"matterport.model.layered",block:!1},{kind:"StringValue",value:"matterport.user.view",block:!1},{kind:"StringValue",value:"matterport.model.defurnished",block:!1}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"model"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeHighlightReel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sourceView"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"asset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Photo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"snapshotLocation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewMode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"showExterior"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"anchor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tags"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PutActiveReel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elements"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReelElementInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mode"}},type:{kind:"NamedType",name:{kind:"Name",value:"HighlightReelMode"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"putActiveReel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"elements"},value:{kind:"Variable",name:{kind:"Name",value:"elements"}}},{kind:"Argument",name:{kind:"Name",value:"mode"},value:{kind:"Variable",name:{kind:"Name",value:"mode"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HighlightReelDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HighlightReel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sourceView"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"overrides"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transitionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"panDirection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"panAngle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"panAlignment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tourShowRoomMeasurements"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"asset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1652}};a.loc.source={body:'#import "./photo-fragments.gql"\n\nquery GetHighlightReel($modelId: ID!) {\n  model(id: $modelId) {\n    id\n    activeHighlightReel {\n      ...HighlightReelDetails\n    }\n  }\n}\n\nquery GetHighlightReelForView($modelId: ID!, $viewType: ID!, $viewId: ID = null) {\n  model(id: $modelId) {\n    id\n    view(type: $viewType, id: $viewId) {\n      model {\n        activeHighlightReel {\n          ...HighlightReelDetails\n        }\n      }\n    }\n  }\n}\n\nquery GetHighlightReelSweeps($modelId: ID!) {\n  model(id: $modelId) {\n    views(types: ["matterport.model.default", "matterport.model.layered", "matterport.user.view", "matterport.model.defurnished"]) {\n      id\n      model {\n      \tactiveHighlightReel {\n          reel {\n            sourceView {\n              id\n            }\n            asset {\n              ... on Photo {\n                label\n              \tsnapshotLocation {\n                  viewMode\n                  showExterior\n                  anchor {\n                    id\n                    tags # only valid if visible\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nmutation PutActiveReel($modelId: ID!, $elements: [ReelElementInput!], $mode: HighlightReelMode) {\n  putActiveReel(modelId: $modelId, elements: $elements, mode: $mode) {\n    id\n  }\n}\n\nfragment HighlightReelDetails on HighlightReel {\n  id\n  label\n  mode\n  reel {\n    title\n    description\n    sourceView {\n      id\n      type\n    }\n    overrides {\n      transitionType\n      panDirection\n      panAngle\n      panAlignment\n      tourShowRoomMeasurements\n    }\n    asset {\n      ...PhotoDetails\n    }\n    source\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function l(e,i){if("FragmentSpread"===e.kind)i.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&i.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){l(e,i)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){l(e,i)})),e.definitions&&e.definitions.forEach((function(e){l(e,i)}))}a.definitions=a.definitions.concat(n(10600).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!t[i]&&(t[i]=!0,!0)})));var d={};function o(e,i){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==i)return a}}function r(e,i){var n={kind:e.kind,definitions:[o(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=d[i]||new Set,t=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var r=l;l=new Set,r.forEach((function(e){t.has(e)||(t.add(e),(d[e]||new Set).forEach((function(e){l.add(e)})))}))}return t.forEach((function(i){var a=o(e,i);a&&n.definitions.push(a)})),n}a.definitions.forEach((function(e){if(e.name){var i=new Set;l(e,i),d[e.name.value]=i}})),e.exports=a,e.exports.GetHighlightReel=r(a,"GetHighlightReel"),e.exports.GetHighlightReelForView=r(a,"GetHighlightReelForView"),e.exports.GetHighlightReelSweeps=r(a,"GetHighlightReelSweeps"),e.exports.PutActiveReel=r(a,"PutActiveReel"),e.exports.HighlightReelDetails=r(a,"HighlightReelDetails")},28404:(e,i,n)=>{"use strict";n.d(i,{F:()=>d});var a=n(3928),t=n(66416),l=n(27625);class d extends a.v{constructor(){super(),this.category=t.X.USER}get aspectRatio(){return this.width/this.height}clone(){return(new d).copy(this)}copy(e){return this.sid=e.sid,this.sourceViewId=e.sourceViewId,this.thumbnailUrl=e.thumbnailUrl,this.imageUrl=e.imageUrl,this.downloadUrl=e.downloadUrl,this.name=e.name,this.label=e.label,this.is360=e.is360,this.origin=e.origin,this.category=e.category,this.height=e.height,this.width=e.width,this.created=e.created,this.modified=e.modified,this.state=e.state,this.visionLabel=e.visionLabel,this.visionName=e.visionName,this.imageBlob=e.imageBlob,this.metadata={cameraMode:e.metadata.cameraMode,cameraPosition:e.metadata.cameraPosition.clone(),cameraQuaternion:e.metadata.cameraQuaternion.clone(),scanId:e.metadata.scanId,orthoZoom:e.metadata.orthoZoom,ssZoom:e.metadata.ssZoom,floorId:e.metadata.floorId,floorVisibility:e.metadata.floorVisibility,scanTags:e.metadata.scanTags},this.commit(),this}refresh(e){this.thumbnailUrl.refreshFrom(e.thumbnailUrl),this.imageUrl.refreshFrom(e.imageUrl),this.downloadUrl.refreshFrom(e.downloadUrl)}equals(e){return this.metadata.cameraMode===e.metadata.cameraMode&&this.metadata.scanId===e.metadata.scanId&&(0,l.j1)(this.metadata.cameraPosition,e.metadata.cameraPosition)&&(0,l.qS)(this.metadata.cameraQuaternion,e.metadata.cameraQuaternion)}dispose(){[this.imageUrl,this.thumbnailUrl,this.downloadUrl].forEach((e=>{const i=e.getCurrentValue();i.startsWith("blob:")&&URL.revokeObjectURL(i)}))}}},6478:(e,i,n)=>{"use strict";var a;n.d(i,{j:()=>a}),function(e){e.BUNDLE="bundle",e.USER="user",e.VISION="vision",e.AUTOTOUR="autotour"}(a||(a={}))},95234:(e,i,n)=>{"use strict";n.d(i,{S:()=>k});var a=n(68909),t=n(9139),l=n(64391),d=n(66806),o=n(86866),r=n(81587),s=n(28404),m=n(66416),u=n(74381),c=n(6478);const v=new t.Vy("mds-snapshot-deserializer");class k{constructor(){}deserialize(e){var i,n,t,c,k,h,g,p,N;if(!e||!this.validate(e))return v.debug("Deserialized invalid Snapshot data from MDS",e),null;const S=new s.F;S.sid=e.id,S.thumbnailUrl=new l.f(e.thumbnailUrl||"",(0,r.XH)(e.validUntil,null)),S.imageUrl=new l.f(e.presentationUrl||"",(0,r.XH)(e.validUntil,null)),S.downloadUrl=new l.f(e.downloadUrl||"",(0,r.XH)(e.validUntil,null)),S.category=this.getCwfSnapshotCategory(e)||m.X.USER,S.origin=this.getCwfSnapshotOrigin(e)||void 0,S.width=e.width||0,S.height=e.height||0,S.created=(0,r.XH)(e.created),S.modified=(0,r.XH)(e.modified),S.visionLabel=e.classification||"",S.sourceViewId=null===(i=e.model)||void 0===i?void 0:i.id,S.label=e.label||"",S.name=S.label,S.name=S.name.replace("_defurnished",""),S.name=S.name.replace(/([0-9.]+_[0-9.]+_?)(.*)?$/,"$2");const f=null===(c=null===(t=null===(n=e.snapshotLocation)||void 0===n?void 0:n.anchor)||void 0===t?void 0:t.pano)||void 0===c?void 0:c.placement;S.is360=!(!f||f===u.$h.AUTO);const{snapshotLocation:b}=e;if(b){const e=b.position?o.U$.fromVisionVector(b.position):new a.Vector3,i=b.rotation?o.U$.fromVisionCameraQuaternion(b.rotation):new a.Quaternion,n=this.getCwfViewmode(b.viewMode,b.showExterior)||d.N.Panorama,t=[];for(const e of b.floorVisibility||[]){for(let i=0;i<e.sequence;i++)t[i]=t[i]||0;t[e.sequence]=1}S.metadata={cameraMode:n,cameraPosition:e,cameraQuaternion:i,scanId:null===(k=b.anchor)||void 0===k?void 0:k.id,orthoZoom:n===d.N.Floorplan&&null!==(h=b.zoom)&&void 0!==h?h:-1,ssZoom:b.zoom||1,floorId:b.floorVisibility&&b.floorVisibility.length>0?b.floorVisibility[0].id:null,floorVisibility:t,scanTags:(null===(g=b.anchor)||void 0===g?void 0:g.tags)||null,roomId:null===(N=null===(p=b.anchor)||void 0===p?void 0:p.room)||void 0===N?void 0:N.id}}return S}validate(e){var i;if(!(null===(i=e.snapshotLocation)||void 0===i?void 0:i.position))return!1;const n=["id","snapshotLocation","thumbnailUrl","presentationUrl"].every((i=>i in e)),a=null!==this.getCwfSnapshotCategory(e);return n&&a}getCwfViewmode(e,i){const n={[u.nE.DOLLHOUSE]:i?d.N.ExteriorSplat:d.N.Dollhouse,[u.nE.PANORAMA]:d.N.Panorama,[u.nE.FLOORPLAN]:d.N.Floorplan,[u.nE.MESH]:d.N.Panorama};return e&&e in n?n[e]:null}getCwfSnapshotCategory(e){var i,n,a;if(e.category===u.hL.TOUR)return m.X.TOUR;if(e.origin===u.pu.VISION)return m.X.AUTO;if(e.type===u.xx.EQUIRECTANGULAR)return m.X.PANORAMA;const t=null===(a=null===(n=null===(i=e.snapshotLocation)||void 0===i?void 0:i.anchor)||void 0===n?void 0:n.pano)||void 0===a?void 0:a.placement;return e.type===u.xx.PHOTO2D?t===u.$h.MANUAL?m.X.UNALIGNED:m.X.USER:null}getCwfSnapshotOrigin(e){const i={[u.pu.BUNDLE]:c.j.BUNDLE,[u.pu.USER]:c.j.USER,[u.pu.VISION]:c.j.VISION};return e.origin&&e.origin in i?i[e.origin]:void 0}}}}]);