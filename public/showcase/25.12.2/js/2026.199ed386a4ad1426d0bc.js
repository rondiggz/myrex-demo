/*! For license information please see 2026.199ed386a4ad1426d0bc.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[2026],{52026:(e,n,t)=>{t.d(n,{GI:()=>p,I9:()=>l,IV:()=>a,Y7:()=>d,vM:()=>s});var r=t(78229),o=t(96659),i=t(65882),u=t(40397),c=t(86866);const s={count:0};const a=e=>{const{additionalFilter:n,sweepData:t,direction:i,sourceSweep:u,ignoreSweeps:c,directionFactor:s,considerTrims:a,meshQuery:p}=e;if(!t.currentSweepObject)return[];const l=u||t.currentSweepObject;let d=r.xg(l);a&&p&&!l.neighborsEdited&&(d=v(l,p));const f=[r.AU(l),r.Ol(),d,r.jW(l.position,i,s)];for(const e of c)f.push(r.AU(e));const m=[o.oW(l.position,i),o.Io(l.position)];return n&&f.push(n),t.sortByScore(f,m)},p=e=>{const{sweepData:n,direction:t,viewDirection:u,sourceSweep:c,ignoreSweeps:a,directionFactor:p,additionalFilter:l,meshQuery:d,scorers:f=[],filters:b=[]}=e;if(!n.currentSweepObject)return[];const v=t.clone().normalize(),h=u?u.clone().normalize():void 0,g=c||n.currentSweepObject;b.push(r.AU(g),r.Ol(),r.fm(g.position,i.U.maxDistSameFloor*i.U.maxDistSameFloor),r.Zx());for(const e of a)b.push(r.AU(e));return d&&!g.neighborsEdited||b.push(r.xg(g)),h?b.push(y(g,v,h,null!=p?p:i.U.directionFactor,i.U.viewDirectionFactor)):b.push(r.jW(g.position,v,p)),l&&b.push(l),d&&!g.neighborsEdited&&b.push(r.Zz.negate(O(g,d))),h&&f.push(o.VY(g.position,h,i.U.viewDirectionWeight)),f.push(o.oW(g.position,v,i.U.directionWeight),o.Io(g.position),j(g),m(g.sourceViewId)),s.count=0,n.sortByScore(b,f)},l=(e,n,t,u,c=[],a=[])=>{const p=a.slice(),l=c.slice();p.push(r.Ol(),r.Zx()),l.push(o.Io(t.point));const d=e.currentSweepObject;n&&d?(p.push(r.AU(d),r.lp(d.position,i.U.longerTransitionMaxDist),r.xg(d)),l.push(f(e),m(d.sourceViewId))):p.push(r.lp(t.point,i.U.longerTransitionMaxDist)),t.face&&p.push(r.DJ(t.point,t.face.normal));const y=u.floorIdFromObject(t.object);y&&p.push(r.Eo(y));const O=u.mdsRoomIdFromObject(t.object);O&&p.push(b(O)),s.count=0;const v=e.sortByScore(p,l);if(0===v.length){const n=e.getClosestSweep(t.point,!0,(e=>a.every((n=>n(e)))));v.push({sweep:n,score:0})}return v},d=(e,n,t)=>{const r=(0,u.kf)(e,n);return t&&r.multiply(t),(0,c.V5)(r)},f=e=>{function n(n){return e.containsSweep(n.id)?5:-5}return Object.defineProperty(n,"name",{value:"_preferUnfiltered"}),n},m=e=>{function n(n){return e===n.sourceViewId?1:-1}return Object.defineProperty(n,"name",{value:"_bySameView"}),n},b=e=>{function n(n){return e===n.roomId}return Object.defineProperty(n,"name",{value:"_bySameRoom"}),n},y=(e,n,t,o,i)=>{const u=r.jW(e.position,n,o);Object.defineProperty(u,"name",{value:"_filterByDir"});const c=r.Zz.some(r.Zz.every(u,r.lp(e.position,5)),r.jW(e.position,t,i));Object.defineProperty(c,"name",{value:"_filterByDirOrViewDir"});return n.dot(t)<.25?u:c},O=(e,n)=>{function t(t){return s.count++,n.isSegmentOccluded(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_notRaycastNeighbors"}),t},v=(e,n)=>{const t=r.Zz.some(r.xg(e),r.Zz.every(r.Zz.negate(r.xg(e)),r.Zx(),r.Ol(),r.fm(e.position,i.U.maxDistSameFloor*i.U.maxDistSameFloor),((e,n)=>{function t(t){return n.isSegmentTrimmed(e.position,t.position)}return Object.defineProperty(t,"name",{value:"_intersectsTrim"}),t})(e,n),r.Zz.negate(O(e,n))));return Object.defineProperty(t,"name",{value:"_filterByNeighborOrTrim"}),t},j=e=>{function n(n){return r.xg(e)(n)?1:-1}return Object.defineProperty(n,"name",{value:"_visionNeighbors"}),n}},78229:(e,n,t)=>{t.d(n,{AU:()=>u,DJ:()=>y,Eo:()=>f,GS:()=>a,OX:()=>l,Ol:()=>b,Pi:()=>O,Zx:()=>p,Zz:()=>h,f:()=>s,fm:()=>j,jW:()=>m,lp:()=>v,sT:()=>d,xg:()=>c});var r=t(50018),o=t(68909);const i=.25,u=e=>{function n(n){return n!==e}return Object.defineProperty(n,"name",{value:"_not"}),n},c=e=>{function n(n){return!!e.neighbours&&(-1!==e.neighbours.indexOf(n.id)||-1!==e.neighbours.indexOf(n.platformId))}return Object.defineProperty(n,"name",{value:"_neighbor"}),n},s=e=>{function n(n){return e===n||c(e)(n)}return Object.defineProperty(n,"name",{value:"_neighborOrSelf"}),n};function a(e){return e&&e.placementType===r.EO.MANUAL}function p(){function e(e){return e&&e.alignmentType===r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_aligned"}),e}const l=()=>{function e(e){return e&&e.alignmentType!==r.c$.ALIGNED}return Object.defineProperty(e,"name",{value:"_unaligned"}),e},d=e=>{function n(n){return n&&e.floorId===n.floorId}return Object.defineProperty(n,"name",{value:"_sameFloor"}),n},f=e=>{function n(n){return n&&e===n.floorId}return Object.defineProperty(n,"name",{value:"_onFloor"}),n},m=(()=>{const e=new o.Vector3,n=new o.Vector3;return(t,r,o=i)=>{function u(i){return e.copy(i.position).sub(t).normalize().dot(n.copy(r))>o}return Object.defineProperty(u,"name",{value:"_inDirection"}),u}})(),b=()=>{function e(e){return e&&e.enabled}return Object.defineProperty(e,"name",{value:"_enabled"}),e},y=(e,n)=>{const t=new o.Vector3;function r(r){return t.copy(r.position).sub(e).normalize().dot(n)>0}return n=n.clone(),Object.defineProperty(r,"name",{value:"_byNormal"}),r},O=(e,n)=>{function t(t){return e.distanceTo(t.position)>n}return Object.defineProperty(t,"name",{value:"_outsideMaxDist"}),t},v=(e,n)=>{function t(t){return e.distanceTo(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxDist"}),t},j=(e,n)=>{function t(t){return e.distanceToSquared(t.position)<n}return Object.defineProperty(t,"name",{value:"_inMaxSqDist"}),t},h={negate:e=>function(n){return!e.call(e,n)},every:(...e)=>function(n){return e.every((e=>e(n)))},some:(...e)=>function(n){return e.some((e=>e(n)))}}},96659:(e,n,t)=>{t.d(n,{Io:()=>c,VY:()=>a,cv:()=>p,d$:()=>u,oW:()=>s});var r=t(68909);const o=-1,i=10,u=(e,n=o)=>{function t(t){return e.distanceToSquared(t.position)*n}return Object.defineProperty(t,"name",{value:"_distanceSq"}),t},c=(e,n=o)=>{function t(t){return e.distanceTo(t.position)*n}return Object.defineProperty(t,"name",{value:"_distance"}),t},s=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_direction"}),u},a=(e,n,t=i)=>{const o=new r.Vector3;function u(r){return o.copy(r.position).sub(e).normalize().dot(n)*t}return Object.defineProperty(u,"name",{value:"_viewDirNorm"}),u},p=(e,n=o)=>{function t(t){return e.distanceToSquared(t.floorPosition)*n}return Object.defineProperty(t,"name",{value:"_floorDistSq"}),t}}}]);