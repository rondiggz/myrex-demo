/*! For license information please see 2240.ace2ac636ccc325fbeb9.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[2240],{82240:(t,e,i)=>{i.d(e,{U:()=>C});var s=i(81662),o=i(68909);class n{constructor(t,e,i){return this.thisType=t,this.container=e,this.mesh=i(),this.mesh.name=`${t.name}`,this.material=this.mesh.material,this.geometry=this.mesh.geometry,this}opacity(t){return this.material.opacity=t,this}}function r(t,e){e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((i=>{t.prototype[i]=e.prototype[i]}))}))}class a{constructor(){this.animationInit=!1}initAnimationMixin(t,e){this.animState={scale:e?e.clone():new o.Vector3(1,1,1),position:t?t.clone():new o.Vector3,target:{scale:e?e.clone():new o.Vector3(1,1,1),position:t?t.clone():new o.Vector3},temp:{pos:new o.Vector3,scale:new o.Vector3,makeScale:new o.Vector3}},this.animationInit=!0}update(t,e,i){if(!this.animationInit)throw Error(`${a.name} call this.initAnimationMixin() in ${this.style} constructor to enable update, because I said so.`);this.mesh.position.copy(t),i&&this.mesh.quaternion.copy(i);const s=this.vector3From(e);return s.equals(this.mesh.scale)||this.mesh.scale.copy(s),this.animState.scale.copy(this.mesh.scale),this.animState.position.copy(this.mesh.position),this.mesh.updateMatrixWorld(!0),this}animate(t,e,i){if(!this.animationInit)throw Error(`${a.name} call this.initAnimationMixin() in ${this.style} constructor to enable animations, because I said so.`);const s=this.vector3From(i);this.animState.target.scale.copy(s),this.animState.target.position.copy(e);const o=this.animState.temp.pos.copy(this.mesh.position).lerp(e,t),n=this.animState.temp.scale.copy(this.mesh.scale).lerp(s,t);return this.update(o,n),this}vector3From(t){if(t instanceof o.Vector3)return this.animState.temp.makeScale.copy(t).clamp(h,l);if("number"==typeof t)return this.animState.temp.makeScale.set(t,t,t).clamp(h,l);throw Error("Unexpected scale input")}}const c=.01,h=new o.Vector3(c,c,c),l=new o.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);class p{toggle(t){return t?this.container.add(this.mesh):this.container.remove(this.mesh),this.isVisible=t,this}}class u extends n{constructor(t,e){super(u,t,(()=>new o.Mesh(new o.BoxGeometry(1,1,1),new o.MeshBasicMaterial(e)))),this.container=t,this.style="Box",this.mesh.frustumCulled=!1,this.geometry.computeBoundingBox(),this.initAnimationMixin()}}r(u,[a,p]);class m extends n{constructor(t,e){super(m,t,(()=>{const t=new o.Box3Helper((new o.Box3).setFromCenterAndSize(new o.Vector3,new o.Vector3(1,1,1)));return new o.LineSegments(t.geometry,t.material)})),this.container=t,this.style="BoxWireframeMesh",e&&this.material.setValues(e),this.mesh.frustumCulled=!1,this.initAnimationMixin()}}r(m,[p,a]);class d extends n{constructor(t,e){super(d,t,(()=>new o.CameraHelper(e))),this.container=t,this.style="CameraHelper",this.updateCamera(e)}updateCamera(t){return this.mesh.camera.copy(this.camWithSaneFarDistance(t)),this.mesh.update(),this}camWithSaneFarDistance(t){const e=t.clone();return e.far=5,e}}r(d,[p]);class w extends n{constructor(t,e){super(w,t,(()=>new o.Mesh(new o.PlaneGeometry(1),new o.MeshBasicMaterial(e)))),this.container=t,this.style="PlaneMesh",this.radius=1;const i=new o.Matrix4;i.makeRotationFromEuler(new o.Euler(-Math.PI/2,0,0,"XYZ")),this.geometry.applyMatrix4(i),this.mesh.frustumCulled=!1,this.initAnimationMixin()}}r(w,[p,a]);class g extends n{constructor(t,e){super(g,t,(()=>new o.Mesh(new o.SphereGeometry(1),new o.MeshBasicMaterial(e)))),this.container=t,this.style="SphereMesh",this.radius=1,this.mesh.frustumCulled=!1,this.initAnimationMixin()}}r(g,[p,a]);var y=i(38069);class b extends n{constructor(t,e){return super(b,t,(()=>new o.Line(new o.BufferGeometry,new o.LineBasicMaterial(Object.assign({color:y.V.MP_BRAND,opacity:1,transparent:!0},e))))),this.container=t,this.positionsBuffer=new o.BufferAttribute(new Float32Array(150),3),this.point=new o.Vector3,this.points={start:new o.Vector3,control:new o.Vector3,end:new o.Vector3},this.updatePoints=(t,e,i)=>{this.points.start.copy(this.curve.v0.copy(t)),this.points.control.copy(this.curve.v1.copy(e)),this.points.end.copy(this.curve.v2.copy(i));for(let t=0;t<50;t++){const e=t/49;this.curve.getPoint(e,this.point),this.positionsBuffer.setXYZ(t,this.point.x,this.point.y,this.point.z)}return this.positionsBuffer.needsUpdate=!0,this},this.animatePoints=(t,e,i,s)=>{const{start:o,control:n,end:r}=this.points;return o.equals(n)&&o.equals(r)?(this.updatePoints(e,i,s),this):(o.lerp(e,t),n.lerp(i,t),r.lerp(s,t),this.updatePoints(o,n,r),this)},this.mesh.frustumCulled=!1,this.curve=new o.QuadraticBezierCurve3(new o.Vector3,new o.Vector3,new o.Vector3),this.geometry.setAttribute("position",this.positionsBuffer),this.geometry.computeBoundingBox(),this}}r(b,[p]);var f=i(52514),x=i(91994),M=i(29628);class C{constructor(t,e={}){this.cache={},this.helperCache={},this.style={},this.toggle=t=>(this.options.scene&&(t?this.options.scene.add(this.options.container):this.options.scene.remove(this.options.container)),this),this.box=(t,e)=>(this.cache[B.box][t]||(this.cache[B.box][t]=new u(this.options.container,e).toggle(!0)),this.cache[B.box][t]),this.boxWire=(t,e)=>(this.cache[B.boxWire][t]||(this.cache[B.boxWire][t]=new m(this.options.container,e).toggle(!0)),this.cache[B.boxWire][t]),this.cam=(t,e)=>(this.cache[B.cameraHelper][t]||(this.cache[B.cameraHelper][t]=new d(this.options.container,e).toggle(!0)),this.cache[B.cameraHelper][t]),this.label=(t,e,i,s=.25)=>{if(!this.labelCreator){const{color:t,backgroundColor:e,backgroundOpacity:i,background:s}=this.options;this.labelCreator=new f.Il(Object.assign({color:t,background:s,backgroundColor:e,backgroundOpacity:i,wordWrapWidth:650},this.style))}if(!this.cache[B.label][t]){const o=this.labelCreator.createLabel();this.cache[B.label][t]=o,o.position.copy(i),o.text=e,o.scaleFactor=s,this.options.container.add(o)}return this.cache[B.label][t]},this.line=(t,e=this.options.lineColor,i=this.options.linewidth)=>{if(!this.cache[B.line][t]){const o=(0,x.makeLineMaterial)(e,!1,{linewidth:i}),n={onShow:()=>this.options.container.add(...r.children),onHide:()=>this.options.container.remove(...r.children)},r=new M.e(s.B1.ZERO.clone(),s.B1.ZERO.clone(),o,n);r.updateResolution(window.innerWidth,window.innerHeight).opacity(1).toggle(!0),this.cache[B.line][t]=r}return this.cache[B.line][t]},this.plane=(t,e)=>(this.cache[B.plane][t]||(this.cache[B.plane][t]=new w(this.options.container,e).toggle(!0)),this.cache[B.plane][t]),this.setStyle=t=>{this.style=t},this.sphere=(t,e)=>(this.cache[B.sphere][t]||(this.cache[B.sphere][t]=new g(this.options.container,e).toggle(!0)),this.cache[B.sphere][t]),this.triangle=(t,e,i,s,n)=>{if(!this.cache[B.triangle][t]){const r=new Float32Array(9);e.toArray(r,0),i.toArray(r,3),s.toArray(r,6);const a=new o.BufferGeometry;a.setAttribute("position",new o.BufferAttribute(r,3));const c=new o.Mesh(a,new o.MeshBasicMaterial(n));this.options.container.add(c),this.cache[B.triangle][t]=new g(this.options.container,n).toggle(!0)}return this.cache[B.triangle][t]},this.spline=(t,e)=>(this.cache[B.spline][t]||(this.cache[B.spline][t]=new b(this.options.container,e).toggle(!0)),this.cache[B.spline][t]),this.randomColor=t=>{if(void 0!==t){if(!this.helperCache[A.color][t]){const e=new o.Color(V(),V(),V());this.helperCache[A.color][t]=e}return this.helperCache[A.color][t]}return new o.Color(V(),V(),V())},this.randomVector3=t=>{if(void 0!==t){if(!this.helperCache[A.vector3][t]){const e=new o.Vector3(2*(.5-V()),2*(.5-V()),2*(.5-V()));this.helperCache[A.vector3][t]=e}return this.helperCache[A.vector3][t]}return new o.Vector3(2*(.5-V()),2*(.5-V()),2*(.5-V()))},this.toggleAll=t=>{for(const e of Object.values(B)){const i=Object.values(this.cache[e]);for(const e of i)"toggle"in e&&e.toggle(t)}return this},this.options=Object.assign(Object.assign({},v),t),this.style=e;for(const t of Object.values(B))this.cache[t]={};for(const t of Object.values(A))this.helperCache[t]={};this.options.scene&&this.toggle(!0)}async addToScene(t){return this.options.scene=t,this.toggle(!0),this}}const V=()=>Math.random(),v={lineColor:y.V.WHITE.clone(),linewidth:2,color:y.V.WHITE.clone(),background:!0,backgroundColor:y.V.WHITE.clone(),backgroundOpacity:.5,container:new o.Group};var B,A;!function(t){t.box="box",t.boxWire="boxWire",t.label="label",t.line="line",t.plane="plane",t.sphere="sphere",t.spline="spline",t.triangle="triangle",t.cameraHelper="cameraHelper"}(B||(B={})),function(t){t.color="color",t.vector3="vector3"}(A||(A={}))}}]);